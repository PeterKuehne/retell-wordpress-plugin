!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RetellClient={})}(this,function(e){"use strict";class t extends EventEmitter{constructor(){super(),this.room=void 0,this.connected=!1,this.isAgentTalking=!1}async startCall(e){try{this.room=new Room({audioCaptureDefaults:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1,deviceId:e.captureDeviceId,sampleRate:e.sampleRate},audioOutput:{deviceId:e.playbackDeviceId}}),this.handleRoomEvents(),this.handleAudioEvents(e),this.handleDataEvents(),await this.room.connect("wss://retell-ai-4ihahnq7.livekit.cloud",e.accessToken),console.log("connected to room",this.room.name),this.room.localParticipant.setMicrophoneEnabled(!0),this.connected=!0,this.emit("call_started")}catch(e){this.emit("error","Error starting call"),console.error("Error starting call",e),this.stopCall()}}stopCall(){this.connected&&(this.connected=!1,this.emit("call_ended"),this.room?.disconnect()),this.isAgentTalking=!1,delete this.room}mute(){this.connected&&this.room.localParticipant.setMicrophoneEnabled(!1)}unmute(){this.connected&&this.room.localParticipant.setMicrophoneEnabled(!0)}}e.RetellWebClient=t,Object.defineProperty(e,"__esModule",{value:!0})});